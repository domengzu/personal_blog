<h2>Comments</h2>

<% @post.comments.each do |comment| %>
<p>
    <strong><%= comment.user.email %>:</strong>
    <%= comment.body %>

    <% if comment.user == current_user %>
    <%= link_to "Delete", 
          post_comment_path(@post, comment),
          data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this comment?" } %>
    <% end %>
</p>
<% end %>

<% if user_signed_in? %>
<%= form_with model: [@post, Comment.new] do |f| %>
<%= f.text_area :body, placeholder: "Add a comment" %>
<%= f.submit "Post Comment" %>
<% end %>
<% end %>